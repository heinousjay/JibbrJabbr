<!DOCTYPE html>
<html>
	<head>
		<title>JibbrJabbr</title>
	</head>
	<body style="color:#0033EE; font-family: Helvetica, Arial;">
		<h1 style="font-size:94pt; margin:0;">JibbrJabbr</h1>
		<input id="message"><button id="send" type="submit">Send</button><br>
		<br>
		<textarea id="responseText" style="width: 500px; height:300px;"></textarea>
		<script type="text/javascript">
			var socket;
			if (!window.WebSocket) {
				window.WebSocket = window.MozWebSocket;
			}
			if (window.WebSocket) {
				socket = new WebSocket("ws://" + window.location.host + "/websocket");
				socket.onmessage = function(event) { 
					var ta = document.getElementById('responseText'); 
					ta.value = ta.value + '\n' + event.data 
				};
				socket.onopen = function(event) { 
					var ta = document.getElementById('responseText'); 
					ta.value = "Web Socket opened!"; 
				};
				socket.onclose = function(event) {
					var ta = document.getElementById('responseText');
					ta.value = ta.value + "\nWeb Socket closed";
				};
			} else {
				document.getElementById('responseText').value =
					"Your browser does not support WebSocket.";
			}
			
			document.getElementById('send').onclick = function() {
				if (socket && socket.readyState == WebSocket.OPEN) {
					socket.send(document.getElementById('message').value);
					document.getElementById('message').value = "";
				} else {
					document.getElementById('responseText').value = "Click all you want.  I do nothing.";
				}
			}
		</script>
	</body>
</html>