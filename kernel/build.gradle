sourceSets {
	intJava
	intTest
}

dependencies {
	
	compile configurations.serverCore
	
	testCompile configurations.testPack
	testCompile 'com.google.inject.extensions:guice-grapher:3.0'
	
	intJavaCompile configurations.compile
	intJavaCompile configurations.testPack
	intJavaCompile sourceSets.main.output
	
	intTestCompile configurations.intJavaCompile
	intTestCompile sourceSets.intJava.output
}

task integrationTest(type: Test, dependsOn: jar) {
	testClassesDir = sourceSets.intTest.output.classesDir
	classpath = sourceSets.intTest.runtimeClasspath
}

integrationTest.shouldRunAfter test

check.dependsOn integrationTest
